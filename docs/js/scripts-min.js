"use strict";var selectedUser=document.getElementById("imgSelectedUser"),selectedMachine=document.getElementById("imgSelectedMachine"),start=document.getElementById("start"),timeHTML=document.getElementById("time"),userScoreHTML=document.getElementById("userScore"),machineScoreHTML=document.getElementById("machineScore"),userContainer=document.getElementById("userContainer"),machineContainer=document.getElementById("machineContainer"),scoreModal=document.getElementById("scoreModal"),startModal=document.getElementById("startModal"),restart=document.getElementById("restart"),startConfirm=document.getElementById("startConfirm"),roundsInput=document.getElementById("roundsInput"),currentRoundHTML=document.getElementById("currentRoundHTML"),cancel=document.getElementById("cancel"),options=document.getElementById("options"),player=document.querySelectorAll(".player"),user="",machine="",time=3,userScore=0,machineScore=0,gameStarted=!1,roundsToWin=0,currentRound=0,srcBase="assets/img/";options.addEventListener("click",(function(e){if(gameStarted&&("rock"==e.target.id||"paper"==e.target.id||"scissors"==e.target.id))switch(document.querySelectorAll(".option").forEach((function(e){return e.classList.remove("focus")})),e.target.parentNode.classList.add("focus"),e.target.id){case"rock":selectedUser.src=srcBase+"rock.svg",user="rock";break;case"paper":selectedUser.src=srcBase+"paper.svg",user="paper";break;case"scissors":selectedUser.src=srcBase+"scissors.svg",user="scissors"}})),start.addEventListener("click",(function(){gameStarted=!0,selectedMachine.src="",selectedUser.src="",user="",machine="",document.querySelectorAll(".option").forEach((function(e){return e.classList.remove("focus")})),player.forEach((function(e){e.classList.remove("lose"),e.classList.remove("win"),e.classList.remove("tie")})),time=3,currentRound+=1,currentRoundHTML.innerHTML=currentRound,"Start"==start.innerHTML?(startModal.classList.add("lightbox--show"),start.innerHTML="Continue"):timer(),start.disabled=!0})),scoreModal.addEventListener("click",(function(e){e.target.classList.contains("lightbox")&&(scoreModal.classList.remove("lightbox--show"),reset())})),restart.addEventListener("click",(function(){scoreModal.classList.remove("lightbox--show"),reset()})),startConfirm.addEventListener("click",(function(e){e.preventDefault(),document.form.checkValidity()?(roundsToWin=roundsInput.value,startModal.classList.remove("lightbox--show"),document.getElementById("time").style.display="flex",document.getElementById("roundsContainer").style.display="block",currentRoundHTML.innerHTML=currentRound,timer()):""==roundsInput.value?alert("The input can't be empty"):roundsInput.value<=0&&alert("Enter a number bigger than 0")})),cancel.addEventListener("click",(function(e){e.preventDefault(),startModal.classList.remove("lightbox--show"),start.disabled=!1,start.innerHTML="Start",reset()}));var startGame=function(){var e=Math.floor(3*Math.random()+1);switch(e){case 1:e="rock",selectedMachine.src="assets/img/rock.svg";break;case 2:e="paper",selectedMachine.src="assets/img/paper.svg";break;case 3:e="scissors",selectedMachine.src="assets/img/scissors.svg"}validation(e,user)},validation=function(e,t){""==t?(machineScore+=1,machineContainer.classList.add("win"),userContainer.classList.add("lose")):"rock"==t?"scissors"==e?(userScore+=1,machineContainer.classList.add("lose"),userContainer.classList.add("win")):"paper"==e?(machineScore+=1,machineContainer.classList.add("win"),userContainer.classList.add("lose")):(machineContainer.classList.add("tie"),userContainer.classList.add("tie")):"paper"==t?"rock"==e?(userScore+=1,machineContainer.classList.add("lose"),userContainer.classList.add("win")):"scissors"==e?(machineScore+=1,machineContainer.classList.add("win"),userContainer.classList.add("lose")):(machineContainer.classList.add("tie"),userContainer.classList.add("tie")):"scissors"==t&&("paper"==e?(userScore+=1,machineContainer.classList.add("lose"),userContainer.classList.add("win")):"rock"==e?(machineScore+=1,machineContainer.classList.add("win"),userContainer.classList.add("lose")):(machineContainer.classList.add("tie"),userContainer.classList.add("tie"))),userScoreHTML.innerHTML=userScore,machineScoreHTML.innerHTML=machineScore},validateScore=function(){player.forEach((function(e){e.classList.remove("winning"),e.classList.remove("global-tie")})),userScore>machineScore?userContainer.classList.add("winning"):machineScore>userScore?machineContainer.classList.add("winning"):machineScore==userScore&&(userContainer.classList.add("global-tie"),machineContainer.classList.add("global-tie")),roundsToWin==currentRound&&(start.innerHTML="Start",scoreModal.classList.add("lightbox--show"),document.getElementById("finalScoreUser").innerHTML=userScore,document.getElementById("finalScoreMachine").innerHTML=machineScore,userScore>machineScore?document.getElementById("winner").innerHTML="User Wins!!":machineScore>userScore?document.getElementById("winner").innerHTML="Machine Wins!!":machineScore==userScore&&(document.getElementById("winner").innerHTML="Tie!!"))},timer=function(){timeHTML.innerHTML=time,(time-=1)>=0?setTimeout("timer()",1e3):(startGame(),validateScore(),start.disabled=!1,gameStarted=!1)},reset=function(){userScore=0,machineScore=0,currentRound=0,userScoreHTML.innerHTML=userScore,machineScoreHTML.innerHTML=machineScore,gameStarted=!1,document.querySelectorAll(".option").forEach((function(e){return e.classList.remove("focus")})),player.forEach((function(e){e.classList.remove("lose"),e.classList.remove("win"),e.classList.remove("tie"),e.classList.remove("winning"),e.classList.remove("global-tie")})),document.getElementById("time").style.display="none",document.getElementById("roundsContainer").style.display="none",selectedMachine.src="",selectedUser.src=""};